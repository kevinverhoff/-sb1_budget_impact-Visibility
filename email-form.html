<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Email Your Legislators</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-4">
  <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-6">

    <!-- Return Home Button -->
    <div class="mb-6">
      <a href="index.html" class="inline-block bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
        ← Return Home
      </a>
    </div>

    <h1 class="text-2xl font-bold mb-4">Email Your Legislators</h1>
    <p class="mb-6 text-gray-600">
      Enter your name, email, and address to look up your legislators. You can edit the message before sending.
    </p>

    <form id="emailForm" class="space-y-4">

      <!-- Name -->
      <div>
        <label class="block font-semibold">Your Name</label>
        <input type="text" name="name" required class="w-full border rounded px-3 py-2">
      </div>

      <!-- Email -->
      <div>
        <label class="block font-semibold">Your Email</label>
        <input type="email" name="email" required class="w-full border rounded px-3 py-2">
      </div>

      <!-- Address / ZIP for Lookup -->
      <div>
        <label class="block font-semibold">Your Address or ZIP</label>
        <input type="text" id="address" placeholder="123 Main St, Greencastle, IN" class="w-full border rounded px-3 py-2">
        <button type="button" id="lookupBtn" class="mt-2 bg-blue-600 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded">
          Look Up Legislators
        </button>
      </div>

      <!-- To: Recipients -->
      <div>
        <label class="block font-semibold">To:</label>
        <input type="text" name="to" id="recipients" value="H44@iga.in.gov,s24@iga.in.gov,s37@iga.in.gov" class="w-full border rounded px-3 py-2">
      </div>

      <!-- Subject -->
      <div>
        <label class="block font-semibold">Subject</label>
        <input type="text" name="subject" readonly value="Roll back SB1 before it damages our communities" class="w-full border rounded px-3 py-2 bg-gray-100">
      </div>

      <!-- Body -->
      <div>
        <label class="block font-semibold">Message</label>
        <textarea name="body" rows="8" class="w-full border rounded px-3 py-2">
Rep. Baird, Sen. Bray, and Sen. Clark,

I am writing to express my disappointment and concern over your vote in the 2025 legislative session on SB1. The outcome of this law will require cities and counties to enact drastic cuts to vital public services. Our communities cannot cut back any more on emergency services, parks, and basic maintenance.

I am very worried that our roads will crumble, our parks will deteriorate, and that people who need help from police, firefighters, and EMS will not receive the services they need.

I hold you directly responsible for cutting vital public services, and I encourage you to undo the damage before it’s too late.

Sincerely,
        </textarea>
      </div>

      <!-- Send Button -->
      <button type="submit" class="w-full bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
        Send Email
      </button>
    </form>
  </div>

  <script>
    // This is where you’d integrate an actual legislator lookup API
    // For now, we'll fake it with a static mapping
    document.getElementById('lookupBtn').addEventListener('click', () => {
      const address = document.getElementById('address').value.trim();
      const recipientsField = document.getElementById('recipients');

      if (address.includes('Greencastle')) {
        recipientsField.value = "H44@iga.in.gov,s24@iga.in.gov,s37@iga.in.gov";
      } else if (address.includes('Indianapolis')) {
        recipientsField.value = "H87@iga.in.gov,s30@iga.in.gov";
      } else {
        recipientsField.value = "info@iga.in.gov";
      }
    });

    // Submit handler
    document.getElementById('emailForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = Object.fromEntries(new FormData(e.target));

      const response = await fetch('https://YOUR_CLOUD_FUNCTION_URL/sendEmail', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData)
      });

      if (response.ok) {
        alert('Your message was sent successfully!');
        window.location.href = '/';
      } else {
        alert('There was an error sending your message.');
      }
    });
  </script>
</body>
</html>